(function(e,i){typeof exports=="object"&&typeof module!="undefined"?module.exports=i(require("vue")):typeof define=="function"&&define.amd?define(["vue"],i):(e=typeof globalThis!="undefined"?globalThis:e||self,e.VueSound=i(e.Vue))})(this,function(e){"use strict";var i=(n,t)=>{const l=n.__vccOpts||n;for(const[r,a]of t)l[r]=a;return l};const c={},d={height:"32",viewBox:"0 0 32 32",width:"32",xmlns:"http://www.w3.org/2000/svg",class:"play icon",role:"img"},h=[e.createElementVNode("title",null,"Play",-1),e.createElementVNode("path",{d:"m16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zm0 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zm-4-20 12 7-12 7z"},null,-1)];function m(n,t){return e.openBlock(),e.createElementBlock("svg",d,h)}var _=i(c,[["render",m]]);const u={},p={height:"32",viewBox:"0 0 32 32",width:"32",xmlns:"http://www.w3.org/2000/svg",class:"pause-icon",role:"img"},k=[e.createElementVNode("title",null,"Pause",-1),e.createElementVNode("path",{d:"m16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zm0 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zm-6-19h4v12h-4zm8 0h4v12h-4z"},null,-1)];function f(n,t){return e.openBlock(),e.createElementBlock("svg",p,k)}var y=i(u,[["render",f]]);const w={},g={height:"32",viewBox:"0 0 32 32",width:"32",xmlns:"http://www.w3.org/2000/svg",class:"back-15-icon",role:"img"},V=[e.createElementVNode("title",null,"Go Back 15 Seconds",-1),e.createElementVNode("path",{d:"m16 2c-4.418 0-8.418 1.791-11.313 4.687l-4.686-4.687v12h12l-4.485-4.485c2.172-2.172 5.172-3.515 8.485-3.515 6.627 0 12 5.373 12 12 0 3.584-1.572 6.801-4.063 9l2.646 3c3.322-2.932 5.417-7.221 5.417-12 0-8.837-7.163-16-16-16z"},null,-1)];function B(n,t){return e.openBlock(),e.createElementBlock("svg",g,V)}var E=i(w,[["render",B]]);const N={},S={height:"32",viewBox:"0 0 32 32",width:"32",xmlns:"http://www.w3.org/2000/svg",class:"ahead-15-icon",role:"img"},x=[e.createElementVNode("title",null,"Go Ahead 15 Seconds",-1),e.createElementVNode("path",{d:"m0 18c0 4.779 2.095 9.068 5.417 12l2.646-3c-2.491-2.199-4.063-5.416-4.063-9 0-6.627 5.373-12 12-12 3.314 0 6.314 1.343 8.485 3.515l-4.485 4.485h12v-12l-4.687 4.687c-2.895-2.896-6.895-4.687-11.313-4.687-8.837 0-16 7.163-16 16z"},null,-1)];function C(n,t){return e.openBlock(),e.createElementBlock("svg",S,x)}var b=i(N,[["render",C]]);const L={},T={height:"32",viewBox:"0 0 32 32",width:"32",xmlns:"http://www.w3.org/2000/svg",class:"volume-icon",role:"img"},D=[e.createElementVNode("title",null,"Volume",-1),e.createElementVNode("path",{d:"m22.485 25.985c-.384 0-.768-.146-1.061-.439-.586-.586-.586-1.535 0-2.121 4.094-4.094 4.094-10.755 0-14.849-.586-.586-.586-1.536 0-2.121s1.536-.586 2.121 0c2.55 2.55 3.954 5.94 3.954 9.546s-1.404 6.996-3.954 9.546c-.293.293-.677.439-1.061.439zm-5.328-2.828c-.384 0-.768-.146-1.061-.439-.586-.586-.586-1.535 0-2.121 2.534-2.534 2.534-6.658 0-9.192-.586-.586-.586-1.536 0-2.121s1.535-.586 2.121 0c3.704 3.704 3.704 9.731 0 13.435-.293.293-.677.439-1.061.439z"},null,-1),e.createElementVNode("path",{d:"m13 30c-.26 0-.516-.102-.707-.293l-7.707-7.707h-3.586c-.552 0-1-.448-1-1v-10c0-.552.448-1 1-1h3.586l7.707-7.707c.286-.286.716-.372 1.09-.217s.617.519.617.924v26c0 .404-.244.769-.617.924-.124.051-.254.076-.383.076z"},null,-1)];function z(n,t){return e.openBlock(),e.createElementBlock("svg",T,D)}var M=i(L,[["render",z]]);const $={},P={height:"32",viewBox:"0 0 32 32",width:"32",xmlns:"http://www.w3.org/2000/svg",class:"volume-muted-icon",role:"img"},A=[e.createElementVNode("title",null,"Volume Muted",-1),e.createElementVNode("path",{d:"m30 19.348v2.652h-2.652l-3.348-3.348-3.348 3.348h-2.652v-2.652l3.348-3.348-3.348-3.348v-2.652h2.652l3.348 3.348 3.348-3.348h2.652v2.652l-3.348 3.348z"},null,-1),e.createElementVNode("path",{d:"m13 30c-.26 0-.516-.102-.707-.293l-7.707-7.707h-3.586c-.552 0-1-.448-1-1v-10c0-.552.448-1 1-1h3.586l7.707-7.707c.286-.286.716-.372 1.09-.217s.617.519.617.924v26c0 .404-.244.769-.617.924-.124.051-.254.076-.383.076z"},null,-1)];function I(n,t){return e.openBlock(),e.createElementBlock("svg",P,A)}var v=i($,[["render",I]]);const H={},F={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"download-icon",role:"img"},K=[e.createElementVNode("title",null,"Download",-1),e.createElementVNode("path",{d:"M28 16h-5l-7 7-7-7h-5l-4 8v2h32v-2l-4-8zM0 28h32v2h-32v-2zM18 10v-8h-4v8h-7l9 9 9-9h-7z"},null,-1)];function O(n,t){return e.openBlock(),e.createElementBlock("svg",F,K)}var G=i(H,[["render",O]]),$e="";const R={name:"VueSound",components:{PlayIcon:_,PauseIcon:y,Back15Icon:E,Ahead15Icon:b,VolumeIcon:M,VolumeMutedIcon:v,DownloadIcon:G},props:{autoPlay:{type:Boolean,default:!1},details:{type:String,default:null},detailsLink:{type:String,default:null},file:{type:String,default:null},livestream:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},showDownload:{type:Boolean,default:!1},showSkip:{type:Boolean,default:!0},showTrack:{type:Boolean,default:!0},title:{type:String,default:null},titleLink:{type:String,default:null}},data(){return{audio:void 0,currentSeconds:0,durationSeconds:0,buffered:0,innerLoop:!1,loaded:!1,playing:!1,previousVolume:35,showVolume:!1,volume:100}},computed:{hasDetails(){return this.$props.details},hasDetailsLink(){return this.$props.detailsLink},hasTitle(){return this.$props.title},hasTitleLink(){return this.$props.titleLink},muted(){return this.volume/100===0},percentBuffered(){return this.buffered/this.durationSeconds*100},percentComplete(){return this.currentSeconds/this.durationSeconds*100}},watch:{playing(n){if(n)return this.audio.play();this.audio.pause()},volume(){this.audio.volume=this.volume/100}},created(){this.innerLoop=this.loop,window.addEventListener("keydown",n=>{switch(n.code){case"Space":this.togglePlay();break;case"Enter":this.togglePlay();break;case"ArrowUp":this.volume<100&&this.volume++;break;case"ArrowDown":this.volume>0&&this.volume--;break;case"ArrowLeft":this.goBack15();break;case"ArrowRight":this.goAhead15();break}})},mounted(){this.audio=this.$refs.audioFile,this.audio.addEventListener("timeupdate",this.update),this.audio.addEventListener("loadeddata",this.load),this.audio.addEventListener("buffered",this.update),this.audio.addEventListener("pause",()=>{this.playing=!1}),this.audio.addEventListener("play",()=>{this.playing=!0})},methods:{convertTimeHHMMSS(n){const t=new Date(n*1e3).toISOString().substr(11,8);return t.indexOf("00:")===0?t.substr(3):t},download(){this.stop(),window.open(this.file,"download")},goAhead15(){this.audio.currentTime=this.audio.currentTime+15},goBack15(){this.audio.currentTime=this.audio.currentTime-15},load(){if(this.audio.readyState>=2)return this.loaded=!0,this.durationSeconds=parseInt(this.audio.duration),this.playing=this.autoPlay,this.playing;throw new Error("Failed to load sound file.")},mute(){if(this.muted)return this.volume=this.previousVolume,this.volume;this.previousVolume=this.volume,this.volume=0},seek(n){if(!this.loaded)return;const t=n.target.getBoundingClientRect(),l=(n.clientX-t.left)/t.width;this.audio.currentTime=this.audio.duration*l},stop(){this.playing=!1,this.audio.currentTime=0},togglePlay(){this.playing=!this.playing},update(){this.currentSeconds=this.audio.currentTime,this.buffered=this.audio.buffered.end(0)}}},U={class:"player"},j={class:"player-controls"},q=["aria-label"],X={class:"player-track"},J={class:"player-track-title"},Q=["href"],W={key:1},Y={key:2},Z={key:3,class:"player-track-title-details"},ee=["href"],te={class:"player-track-time"},oe={class:"player-track-time-current"},ne=e.createElementVNode("span",{class:"player-track-time-separator"},"/",-1),le={class:"player-track-time-total"},se=e.createElementVNode("label",{for:"playerVolume",class:"hide-ally-element"}," volume slider ",-1),ae=["aria-label"],ie=["loop","src"];function re(n,t,l,r,a,o){const he=e.resolveComponent("back15-icon"),me=e.resolveComponent("play-icon"),_e=e.resolveComponent("pause-icon"),ue=e.resolveComponent("ahead15-icon"),pe=e.resolveComponent("volume-icon"),ke=e.resolveComponent("volume-muted-icon"),fe=e.resolveComponent("download-icon");return e.openBlock(),e.createElementBlock("div",U,[e.createElementVNode("div",j,[l.showSkip&&!l.livestream?(e.openBlock(),e.createElementBlock("a",{key:0,class:"player-back-15-icon","aria-label":"go back 15 seconds",onClick:t[0]||(t[0]=(...s)=>o.goBack15&&o.goBack15(...s))},[e.createVNode(he)])):e.createCommentVNode("",!0),e.createElementVNode("a",{class:"player-play-pause-icon","aria-label":a.playing?"pause":"play",onClick:t[1]||(t[1]=(...s)=>o.togglePlay&&o.togglePlay(...s))},[a.playing?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(me,{key:0})),a.playing?(e.openBlock(),e.createBlock(_e,{key:1})):e.createCommentVNode("",!0)],8,q),l.showSkip&&!l.livestream?(e.openBlock(),e.createElementBlock("a",{key:1,class:"player-ahead-15-icon","aria-label":"go ahead 15 seconds",onClick:t[2]||(t[2]=(...s)=>o.goAhead15&&o.goAhead15(...s))},[e.createVNode(ue)])):e.createCommentVNode("",!0),e.createElementVNode("div",X,[e.createElementVNode("div",J,[o.hasTitle&&o.hasTitleLink?(e.openBlock(),e.createElementBlock("a",{key:0,href:l.titleLink,class:"player-track-title-link"},e.toDisplayString(l.title),9,Q)):e.createCommentVNode("",!0),o.hasTitle&&!o.hasTitleLink?(e.openBlock(),e.createElementBlock("span",W,e.toDisplayString(l.title),1)):e.createCommentVNode("",!0),o.hasTitle&&o.hasDetails?(e.openBlock(),e.createElementBlock("span",Y," - ")):e.createCommentVNode("",!0),o.hasDetails&&!o.hasDetailsLink?(e.openBlock(),e.createElementBlock("span",Z,e.toDisplayString(l.details),1)):e.createCommentVNode("",!0),o.hasDetails&&o.hasDetailsLink?(e.openBlock(),e.createElementBlock("a",{key:4,href:l.detailsLink,class:"player-track-title-details-link"},e.toDisplayString(l.details),9,ee)):e.createCommentVNode("",!0)]),l.livestream?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",{class:"player-track-progress",onClick:t[3]||(t[3]=e.withModifiers((...s)=>o.seek&&o.seek(...s),["prevent"]))},[e.createElementVNode("div",{style:e.normalizeStyle({width:o.percentComplete+"%"}),class:"player-track-seeker"},null,4),e.createElementVNode("div",{style:e.normalizeStyle({width:o.percentBuffered+"%"}),class:"player-track-buffered"},null,4)]),e.createElementVNode("div",te,[e.createElementVNode("span",oe,e.toDisplayString(o.convertTimeHHMMSS(a.currentSeconds)),1),ne,e.createElementVNode("span",le,e.toDisplayString(o.convertTimeHHMMSS(a.durationSeconds)),1)])],64))]),e.createElementVNode("div",{class:"player-volume",onMouseover:t[7]||(t[7]=e.withModifiers(s=>a.showVolume=!0,["prevent"])),onMouseleave:t[8]||(t[8]=e.withModifiers(s=>a.showVolume=!1,["prevent"]))},[se,e.createVNode(e.Transition,{name:"slide-left"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("input",{id:"playerVolume","onUpdate:modelValue":t[4]||(t[4]=s=>a.volume=s),type:"range",min:"0",max:"100"},null,512),[[e.vShow,a.showVolume],[e.vModelText,a.volume]])]),_:1}),e.createElementVNode("a",{tabindex:"0",class:"player-volume-icon","aria-label":o.muted?"unmute":"mute",onClick:t[5]||(t[5]=(...s)=>o.mute&&o.mute(...s)),onKeypress:t[6]||(t[6]=e.withKeys((...s)=>o.mute&&o.mute(...s),["space","enter"]))},[o.muted?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(pe,{key:0})),o.muted?(e.openBlock(),e.createBlock(ke,{key:1})):e.createCommentVNode("",!0)],40,ae)],32),l.showDownload&&!l.livestream?(e.openBlock(),e.createElementBlock("a",{key:2,tabindex:"0",class:"player-download-icon","aria-label":"download",onClick:t[9]||(t[9]=(...s)=>o.download&&o.download(...s)),onKeypress:t[10]||(t[10]=e.withKeys((...s)=>o.download&&o.download(...s),["space","enter"]))},[e.createVNode(fe)],32)):e.createCommentVNode("",!0)]),e.createElementVNode("audio",{ref:"audioFile",loop:a.innerLoop,src:l.file,preload:"auto",style:{display:"none"}},null,8,ie)])}var ce=i(R,[["render",re]]),de={install:n=>{n.component("VueSound",ce)}};return de});
